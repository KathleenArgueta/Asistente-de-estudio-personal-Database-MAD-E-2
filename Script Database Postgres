---------- Aquí comenzamos ------------------

Create database Datos_usuario_asistente_de_estudio_personal;

create table asignatura_name (
    id_asignatura_name serial primary key,
    nombre varchar(100) not null
);

insert into asignatura_name (nombre) values
('metodologías_ágiles'),
('pruebas_software'),
('requerimientos_y_prototipado'),
('pilares_liderazgo'),
('desarrollo_web'),
('bases_datos_ii'),
('desarrollo_aplicaciones_informáticas'),
('desarrollo_personal_&_organizacional');

create table asignatura_estado (
    id_estado serial primary key,
    estado varchar(50) not null
);

insert into asignatura_estado (estado) values
('cursada'),
('en_curso'),
('reprobada'),
('por_cursar');

create table tiempo_estudio (
    id_tiempo_estudio serial primary key,
    duracion varchar(10) not null
);

insert into tiempo_estudio (duracion) values
('00:30h'),
('1:00h'),
('1:30h'),
('2:00h'),
('2:30h'),
('3:00h'),
('3:30h'),
('4:00h'),
('4:30h'),
('5:00h');

create table file_type(
    id_file_type serial primary key,
    tipo_archivo VARCHAR(100) not null
);

insert into file_type (tipo_archivo) values
('PDF'),
('DOCX'),
('MP3'),
('XLSM');

create table carrera_name(
    id_carrera_name serial primary key,
    nombre_carrera varchar(100) not null
);

insert into carrera_name (nombre_carrera) values
('LEN'),
('LCJ'),
('ISND'),
('IDN');

create table usuario(
    id_usuario serial primary key,
    user_name VARCHAR(100) not null,
    user_last_name VARCHAR(100) not null,
    id_carrera_name int,
    user_age int,
    user_email int(100),
    constraint fk_user_carrera foreign key (id_carrera_name) references carrera_name (id_carrera_name)
);

insert into usuario (user_name, user_last_name, id_carrera_name, user_age, user_email) values 
('Kathleen','Argueta', 1, 19, 'kathleen.argueta@gmail.com'),
('Marco',   'Mazzini', 3, 20, 'marco.mazzini@gmail.com'),
('Esmeralda','Mejía',  4, 19, 'esmeralda.mejia@gmail.com'),
('Tiffany', 'Meléndez',1, 19, 'tiffany.melendez@gmail.com'),
('Joseph',  'Lyon',    2, 19, 'joseph.lyon@gmail.com'),
('Armando', 'Salgado', 2, 19, 'armando.salgado@gmail.com');

create table asignatura (
    id_asignatura serial primary key,
    id_usuario int,
    id_asignatura_name int,
    id_estado int,
    constraint fk_asignatura_name foreing key (id_asignatura_name) references asignatura_name (id_asignatura_name),
    constraint fk_asignatura_estado foreing key(id_estado) references asignatura_estado (id_estado), 
    constraint fk_usuario foreign key (id_usuario) references usuario (id_usuario)
);

insert into asignatura (id_usuario, id_asignatura_name, id_estado) values
(1, 1, 2),
(2, 2, 2),
(3, 3, 1),
(4, 4, 4);

CREATE TABLE tiempo (
    id_tiempo serial primary key,
    id_asignatura int,
    id_tiempo_estudio int,
    constraint fk_tiempo_asignatura foreign key (id_asignatura) references asignatura (id_asignatura),
    constraint fk_tiempo_estudio foreign key (id_tiempo_estudio) references tiempo_estudio (id_tiempo_estudio)
);

insert into tiempo (id_asignatura, id_tiempo_estudio) values
(1, 3),
(2, 4), 
(3, 5), 
(4, 1); 

create table archivos (
    id_archivos serial primary key, 
    nombre_archivo varchar(100) not null,
    id_asignatura int not null,
    id_file_type int not null, 
    constraint fk_file_type foreign key (id_file_type) references file_type (id_file_type),
    constraint fk_archivo_asignatura foreign key (id_asignatura) references asignatura (id_asignatura)
);

insert into archivos (nombre_archivo, id_asignatura, id_file_type) values
('guia_metodologias.pdf',      1, 1),  
('pruebas_software.docx',      2, 2), 
('explicacion_prototipado.mp3',3, 3),
('clases_liderazgo.xlsm',      4, 4);

create table notas(
    id_nota int primary key
);

insert into notas (id_nota) values
(0),(1),(2),(3),(4),(5),(6),(7),(8),(9),(10);

create table calificaciones(
    id_calificacion serial primary key,
    id_asignatura int not null,
    id_nota int not null,
    constraint fk_calificacion foreign key (id_asignatura) references asignatura (id_asignatura),
    constraint fk_nota foreign key (id_nota) references notas (id_nota)
);

insert into calificaciones (id_asignatura, id_nota) values
(1, 8),
(2, 7),
(3, 9),
(4, 6);
